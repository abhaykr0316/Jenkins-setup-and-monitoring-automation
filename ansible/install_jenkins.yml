---
- name: Install Jenkins on ansible-target1
  hosts: ansible-target1
  become: yes
  tasks:

   - name: Update apt cache
     apt: 
       update_cache: yes

   - name: Install Java (OpenJDK 17)
     apt:
       name: openjdk-17-jdk
       state: present

   - name: Add Jenkins GPG key
     apt_key:
       url: https://pkg.jenkins.io/debian-stable/jenkins.io-2023.key
       state: present

   - name: Add Jenkins repository
     apt_repository:
       repo: deb https://pkg.jenkins.io/debian-stable binary/
       state: present
       filename: jenkins

   - name: Install Jenkins
     apt:
       name: jenkins
       state: present

   - name: Start and enable Jenkins service
     service:
       name: jenkins
       state: started
       enabled: yes

